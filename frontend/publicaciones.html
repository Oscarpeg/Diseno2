<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Publicaciones - Plataforma Secretar√≠a</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <header class="bg-blue-900 text-white p-4 text-center">
      <h1 class="text-2xl font-bold">
        Plataforma Secretar√≠a - Escuela de Ciencias Exactas
      </h1>
      <p class="text-sm">Universidad Sergio Arboleda</p>
    </header>

    <!-- ‚úÖ NAV CON ETIQUETA DE ROL SIMPLE -->
    <nav class="flex justify-between items-center bg-blue-700 text-white p-2">
      <div class="space-x-4">
        <a href="foro.html" class="hover:underline">Foro</a>
        <a href="publicaciones.html" class="underline font-semibold"
          >Publicaciones</a
        >
        <a href="tickets.html" class="hover:underline">Tickets</a>
      </div>

      <!-- ‚úÖ ETIQUETA SIMPLE DE ROL -->
      <div class="flex items-center space-x-3">
        <span id="rol-usuario" class="text-white text-sm"></span>
        <button
          onclick="cerrarSesion()"
          class="bg-red-500 px-3 py-1 rounded hover:bg-red-600 transition-colors"
        >
          Cerrar sesi√≥n
        </button>
      </div>
    </nav>

    <div class="foro-bg">
      <main class="p-6">
        <section id="publicaciones">
          <!-- Header de la secci√≥n -->
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">
              üì¢ Anuncios de la Secretar√≠a
            </h2>
            <div class="text-sm text-gray-600">
              <span
                class="inline-block bg-yellow-500 text-white text-xs px-2 py-1 rounded"
                >üìå</span
              >
              = Publicaci√≥n destacada
            </div>
          </div>

          <!-- Informaci√≥n -->
          <div
            class="mb-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500"
          >
            <p class="text-blue-800">
              <strong>‚ÑπÔ∏è Informaci√≥n:</strong> Aqu√≠ encontrar√°s todos los
              anuncios oficiales de la secretar√≠a acad√©mica. Las publicaciones
              destacadas son especialmente importantes.
            </p>
          </div>

          <!-- Indicador de carga -->
          <div id="loading" class="text-center py-8" style="display: none">
            <div
              class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"
            ></div>
            <p class="mt-2 text-gray-600">Cargando publicaciones...</p>
          </div>

          <!-- Lista de publicaciones -->
          <div id="lista-publicaciones" class="space-y-4">
            <!-- Las publicaciones se cargan aqu√≠ din√°micamente -->
          </div>

          <!-- Mensaje cuando no hay publicaciones -->
          <div id="no-publicaciones" class="hidden text-center py-12">
            <div class="text-6xl mb-4">üì≠</div>
            <h3 class="text-xl font-semibold text-gray-600 mb-2">
              No hay publicaciones disponibles
            </h3>
            <p class="text-gray-500">
              La secretar√≠a no ha publicado anuncios recientemente.
            </p>
          </div>

          <!-- Mensaje de error -->
          <div id="error-publicaciones" class="hidden text-center py-12">
            <div class="text-6xl mb-4">‚ö†Ô∏è</div>
            <h3 class="text-xl font-semibold text-red-600 mb-2">
              Error al cargar publicaciones
            </h3>
            <p class="text-gray-500 mb-4">
              Hubo un problema al conectar con el servidor.
            </p>
            <button onclick="cargarPublicaciones()" class="btn-blue">
              üîÑ Intentar nuevamente
            </button>
          </div>
        </section>

        <!-- Informaci√≥n adicional -->
        <aside class="mt-8 p-4 bg-gray-50 rounded-lg">
          <h3 class="font-semibold text-gray-800 mb-2">
            üìã ¬øNecesitas m√°s informaci√≥n?
          </h3>
          <div class="text-sm text-gray-600 space-y-1">
            <p>
              ‚Ä¢ Para dudas acad√©micas, visita el
              <a href="foro.html" class="text-blue-600 underline">Foro</a>
            </p>
            <p>
              ‚Ä¢ Para solicitudes espec√≠ficas, crea un
              <a href="tickets.html" class="text-blue-600 underline">Ticket</a>
            </p>
            <p>‚Ä¢ Contacto directo: secretaria@usa.edu.co</p>
          </div>
        </aside>
      </main>
    </div>

    <!-- Template para publicaciones (referencia para JS) -->
    <template id="publicacion-template">
      <div
        class="publicacion bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500"
      >
        <!-- Badge destacada -->
        <div class="destacada-badge mb-3">
          <span
            class="inline-block bg-yellow-500 text-white text-xs px-2 py-1 rounded"
            >üìå DESTACADA</span
          >
        </div>

        <!-- Contenido -->
        <h3 class="titulo font-bold text-xl mb-3 text-gray-800"></h3>
        <p class="contenido text-gray-700 mb-4 leading-relaxed"></p>

        <!-- Metadata -->
        <div
          class="meta flex justify-between items-center text-sm text-gray-500 border-t pt-3"
        >
          <span class="autor"></span>
          <span class="fecha"></span>
        </div>
      </div>
    </template>

    <!-- ‚úÖ SCRIPTS CON ROL SIMPLE -->
    <script src="js/api-client.js"></script>
    <script src="js/simple-role.js"></script>
    <script src="js/publicaciones.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Foro - Plataforma Secretar√≠a</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <header class="w-full bg-blue-900 text-white text-center py-4 shadow-md">
      <h1 class="text-2xl font-bold">
        Plataforma Secretar√≠a - Escuela de Ciencias Exactas
      </h1>
      <p class="text-sm">Universidad Sergio Arboleda</p>
    </header>

    <!-- ‚úÖ NAV CON ETIQUETA DE ROL SIMPLE -->
    <nav
      class="w-full flex justify-between items-center bg-blue-900 text-white px-6 py-2 shadow-sm"
    >
      <div class="space-x-4">
        <a href="foro.html" class="underline">Foro</a>
        <a href="publicaciones.html">Publicaciones</a>
        <a href="tickets.html">Tickets</a>
      </div>

      <!-- ‚úÖ ETIQUETA SIMPLE DE ROL -->
      <div class="flex items-center space-x-3">
        <span id="rol-usuario" class="text-white text-sm"></span>
        <button
          onclick="cerrarSesion()"
          class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded transition-colors"
        >
          Cerrar sesi√≥n
        </button>
      </div>
    </nav>

    <div class="foro-bg">
      <main class="p-6">
        <section id="foro" class="foro-reddit">
          <h2 class="text-xl font-bold mb-4">Foro de Dudas</h2>

          <!-- Formulario para crear posts -->
          <form id="form-foro" class="mb-6 bg-white p-4 rounded shadow">
            <h3 class="font-semibold text-lg mb-4">Crear nueva publicaci√≥n</h3>

            <input
              id="pregunta"
              type="text"
              placeholder="Escribe tu duda o pregunta"
              class="input mb-3"
              required
            />

            <div class="mb-4">
              <label
                for="imagen"
                class="block text-sm font-medium text-gray-700 mb-2"
              >
                Subir imagen (opcional)
              </label>
              <input
                id="imagen"
                type="file"
                accept="image/*"
                class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
              />
              <p class="mt-1 text-sm text-gray-500">PNG, JPG, GIF hasta 5MB</p>
            </div>

            <button type="submit" class="btn-blue">üìù Publicar</button>
          </form>

          <!-- Lista de posts -->
          <div class="mb-4 text-center text-gray-600">
            <div id="loading" class="hidden">
              <div
                class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"
              ></div>
              <span class="ml-2">Cargando posts...</span>
            </div>
          </div>

          <div id="foro-lista" class="space-y-4">
            <!-- Posts se cargan aqu√≠ din√°micamente -->
            <div class="text-center text-gray-500 py-8">
              Cargando publicaciones...
            </div>
          </div>

          <!-- Bot√≥n para cargar m√°s posts -->
          <div class="text-center mt-6">
            <button
              id="load-more"
              onclick="cargarMasPosts()"
              class="btn-blue"
              style="display: none"
            >
              Cargar m√°s publicaciones
            </button>
          </div>

          <!-- Post de ejemplo (estructura de referencia) -->
          <div class="post hidden">
            <div class="votes">
              <button>‚ñ≤</button>
              <div class="score">0</div>
              <button>‚ñº</button>
            </div>
            <div class="content">
              <div class="text">Contenido del post</div>
              <div class="meta">Informaci√≥n del post</div>
              <div class="comentarios">
                <!-- Comentarios aqu√≠ -->
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- ‚úÖ SCRIPTS CON ROL SIMPLE -->
    <script src="js/api-client.js"></script>
    <script src="js/simple-role.js"></script>
    <script src="js/foro.js"></script>
  </body>
</html>
